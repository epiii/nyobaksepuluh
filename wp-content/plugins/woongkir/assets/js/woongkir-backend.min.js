!function(s){"use strict";var r={storeCountry:function(){this.getCountry().length||s.getJSON(woongkir_params.json.country_url,function(i){i.sort(function(i,n){return i.country_name>n.country_name?1:n.country_name>i.country_name?-1:0}),Lockr.set(woongkir_params.json.country_key,i)})},getCountry:function(i,n){var o=Lockr.get(woongkir_params.json.country_key);return o&&void 0!==o?i&&i===Object(i)?this.searchLocation(o,i,n):o:[]},storeProvince:function(){this.getProvince().length||s.getJSON(woongkir_params.json.province_url,function(i){i.sort(function(i,n){return i.province_name>n.province_name?1:n.province_name>i.province_name?-1:0}),Lockr.set(woongkir_params.json.province_key,i)})},getProvince:function(i,n){var o=Lockr.get(woongkir_params.json.province_key);return o&&void 0!==o?i&&i===Object(i)?this.searchLocation(o,i,n):o:[]},storeCity:function(){this.getCity().length||s.getJSON(woongkir_params.json.city_url,function(i){i.sort(function(i,n){return i.city_name>n.city_name?1:n.city_name>i.city_name?-1:0}),Lockr.set(woongkir_params.json.city_key,i)})},getCity:function(i,n){var o=Lockr.get(woongkir_params.json.city_key);return o&&void 0!==o?i&&i===Object(i)?this.searchLocation(o,i,n):o:[]},storeSubdistrict:function(){this.getSubdistrict().length||s.getJSON(woongkir_params.json.subdistrict_url,function(i){i.sort(function(i,n){return i.subdistrict_name>n.subdistrict_name?1:n.subdistrict_name>i.subdistrict_name?-1:0}),Lockr.set(woongkir_params.json.subdistrict_key,i)})},getSubdistrict:function(i,n){var o=Lockr.get(woongkir_params.json.subdistrict_key);return o&&void 0!==o?i&&i===Object(i)?this.searchLocation(o,i,n):o:[]},searchLocation:function(i,n,o){var t=this,r=!1;switch(o=o||"find"){case"filter":r=i.filter(function(i){return t.isLocationMatch(i,n)});break;default:r=i.find(function(i){return t.isLocationMatch(i,n)})}return r||!1},isLocationMatch:function(i,n){var o=!0;for(var t in n)i.hasOwnProperty(t)&&String(i[t]).toLowerCase()===String(n[t]).toLowerCase()||(o=!1);return o}};function i(){var i=r.getProvince(),n=r.getCity(),o=r.getSubdistrict(),e=s(".woongkir-account-type").closest("form");if(e.find(".woongkir-account-type").bind("change",function(i){var n=s(i.currentTarget).val(),o=s(i.currentTarget).data("accounts"),t=s(i.currentTarget).data("couriers");for(var r in t){s("#woongkir-couriers-list-"+r).hide();var e=0;for(var c in t[r])-1===t[r][c].account.indexOf(n)?s("#woongkir-courier-box-"+r+"-"+c).hide().find(".woongkir-service").prop("checked",!1):(s("#woongkir-couriers-list-"+r).show(),s("#woongkir-courier-box-"+r+"-"+c).show()),o[n].multiple||(e&&s("#woongkir-courier-box-"+r+"-"+c).find(".woongkir-service").prop("checked",!1),s("#woongkir-courier-box-"+r+"-"+c).find(".woongkir-service.single:checked").length&&e++)}}),e.find(".woongkir-service.bulk").bind("change",function(){var i=s(this).closest("table"),n=s(this).closest(".woongkir-courier-box").data("id"),o=e.find(".woongkir-account-type").val(),t=e.find(".woongkir-account-type").data("accounts");this.checked?(i.find(".woongkir-service.single").prop("checked",!0),t[o].multiple||e.find(".woongkir-courier-box").not("."+n).find(".woongkir-service").prop("checked",!1)):i.find(".woongkir-service.single").prop("checked",!1)}),e.find(".woongkir-service.single").bind("change",function(){var i=s(this).closest("table"),n=s(this).closest(".woongkir-courier-box").data("id"),o=e.find(".woongkir-account-type").val(),t=e.find(".woongkir-account-type").data("accounts");this.checked?(i.find(".woongkir-service.bulk").prop({checked:!0}),t[o].multiple||e.find(".woongkir-courier-box").not("."+n).find(".woongkir-service").prop("checked",!1)):i.find(".woongkir-service.single:checked").length||i.find(".woongkir-service.bulk").prop({checked:!1})}),e.find(".woongkir-account-type").trigger("change"),e.find(".woongkir-origin-province-select").empty().append('<option value="">'+woongkir_params.text.select_province+"</option>"),i.length){var t=e.find(".woongkir-origin-province").val();s.each(i,function(i,n){var o='<option value="'+n.province_id+'"';t===n.province_id&&(o+=" selected"),o+=">"+n.province,o+="</option>",e.find(".woongkir-origin-province-select").append(o)})}e.find(".woongkir-origin-province-select").bind("change",function(t){if(e.find(".woongkir-origin-province").val(s(t.currentTarget).val()),e.find(".woongkir-origin-city-select").empty().append('<option value="">'+woongkir_params.text.select_city+"</option>"),n.length){var r=e.find(".woongkir-origin-city").val();s.each(n,function(i,n){if(n.province_id===s(t.currentTarget).val()){var o='<option value="'+n.city_id+'"';r===n.city_id&&(o+=" selected"),o+=">",o+=n.type+" ",o+=n.city_name,o+="</option>",e.find(".woongkir-origin-city-select").append(o)}}),e.find(".woongkir-origin-city-select").trigger("change")}}),e.find(".woongkir-origin-city-select").bind("change",function(t){if(e.find(".woongkir-origin-city").val(s(t.currentTarget).val()),e.find(".woongkir-origin-subdistrict-select").empty().append('<option value="">'+woongkir_params.text.select_subdistrict+"</option>"),o.length){var r=e.find(".woongkir-origin-subdistrict").val();s.each(o,function(i,n){if(n.city_id===s(t.currentTarget).val()){var o='<option value="'+n.subdistrict_id+'"';r===n.subdistrict_id&&(o+=" selected"),o+=">"+n.subdistrict_name,o+="</option>",e.find(".woongkir-origin-subdistrict-select").append(o)}}),e.find(".woongkir-origin-subdistrict-select").trigger("change")}}),e.find(".woongkir-origin-subdistrict-select").bind("change",function(i){e.find(".woongkir-origin-subdistrict").val(s(i.currentTarget).val())}),e.find(".woongkir-origin-province-select").trigger("change")}r.storeCountry(),r.storeProvince(),r.storeCity(),r.storeSubdistrict(),s(document).ready(function(){s(document).on("click",".wc-shipping-zone-method-settings",i),woongkir_params.show_settings&&setTimeout(function(){for(var i=!1,n=s(document).find(".wc-shipping-zone-method-type"),o=0;o<n.length;o++){var t=n[o];if(s(t).text()===woongkir_params.method_title)return s(t).closest("tr").find(".row-actions .wc-shipping-zone-method-settings").trigger("click"),void(i=!0)}i||(s(".wc-shipping-zone-add-method").trigger("click"),s('select[name="add_method_id"]').val(woongkir_params.method_id).trigger("change"))},300)})}(jQuery);