!function(i){var t=pok_checkout_data;pok_load_returning_user_data=function(){parseInt(t.billing_state)&&"ID"==t.billing_country&&(i("#billing_state").val(t.billing_state),parseInt(t.billing_city)&&(i("#billing_city").on("options_loaded",function(n,a){a[t.billing_city]&&(t.enableDistrict||i("#billing_city").addClass("update_totals_on_change"),i("#billing_city").val(t.billing_city).trigger("change"))}),parseInt(t.billing_district)&&t.enableDistrict&&i("#billing_district").on("options_loaded",function(n,a){a[t.billing_district]&&i("#billing_district").addClass("update_totals_on_change").val(t.billing_district).trigger("change")}))),parseInt(t.shipping_state)&&"ID"==t.shipping_country&&(i("#shipping_state").val(t.shipping_state),parseInt(t.shipping_city)&&(i("#shipping_city").on("options_loaded",function(n,a){a[t.shipping_city]&&(t.enableDistrict||i("#shipping_city").addClass("update_totals_on_change"),i("#shipping_city").val(t.shipping_city).trigger("change"))}),parseInt(t.shipping_district)&&t.enableDistrict&&i("#shipping_district").on("options_loaded",function(n,a){a[t.shipping_district]&&i("#shipping_district").addClass("update_totals_on_change").val(t.shipping_district).trigger("change")})))},pok_check_country=function(n){"billing"===n?i("#billing_country").val(t.billing_country):"shipping"===n&&i("#shipping_country").val(t.shipping_country),i("#"+n+"_country").on("change",function(){i("#"+n+"_country_field, #"+n+"_state_field").addClass("pok_loading"),i("#"+n+"_country, #"+n+"_state").prop("disabled",!0),i.ajax({type:"POST",url:t.ajaxurl,data:{action:"pok_change_country",country:i("#"+n+"_country").val()},success:function(t){"reload"==t?(i("*").css("cursor","wait"),location.reload()):(i("#"+n+"_country_field, #"+n+"_state_field").removeClass("pok_loading"),i("#"+n+"_country, #"+n+"_state").prop("disabled",!1))}})})},pok_load_city=function(n){if(("billing"===n||"shipping"===n)&&"ID"==t.billing_country){var a=i("#"+n+"_state").val();a&&(i("#"+n+"_city_field, #"+n+"_district_field").prop("title",t.labelLoadingCity).addClass("pok_loading"),i("#"+n+"_city, #"+n+"_district").prop("disabled",!0),i.post(t.ajaxurl,{action:"get_list_city",nextNonce:t.nextNonce,province_id:a},function(e,o){var l=i.parseJSON(e);if(0==a||"success"==o&&!Array.isArray(l))i("#"+n+"_city").val("").empty().append('<option value="">'+t.labelSelectCity+"</option>"),i("#"+n+"_district").val("").empty().append('<option value="">'+t.labelSelectDistrict+"</option>"),i.each(l,function(t,a){""!=a&&"0"!=a&&i("#"+n+"_city").append('<option value="'+t+'">'+a+"</option>")}),i("#"+n+"_city_field, #"+n+"_district_field").removeAttr("title").removeClass("pok_loading"),i("#"+n+"_city").prop("disabled",!1).trigger("chosen:updated").trigger("options_loaded",l),i("#"+n+"_district").prop("disabled",!1).trigger("chosen:updated"),t.enableDistrict||i("#"+n+"_city_field").addClass("update_totals_on_change");else if(i("#"+n+"_city_field").removeAttr("title").removeClass("pok_loading"),i("#"+n+"_city").prop("disabled",!1),confirm(t.labelFailedCity))return pok_load_city(n)}))}},pok_load_district=function(n){if(("billing"===n||"shipping"===n)&&"ID"==t.billing_country){var a=i("#"+n+"_city").val();parseInt(a)&&(i("#"+n+"_district_field").prop("title",t.labelLoadingDistrict).addClass("pok_loading"),i("#"+n+"_district").prop("disabled",!0),i.post(t.ajaxurl,{action:"get_list_district",nextNonce:t.nextNonce,city_id:a},function(e,o){var l=i.parseJSON(e);if(0==a||"success"==o&&!Array.isArray(l))i("#"+n+"_district").val("").empty().append('<option value="">'+t.labelSelectDistrict+"</option>"),i.each(l,function(t,a){""!=a&&"0"!=a&&i("#"+n+"_district").append('<option value="'+t+'">'+a+"</option>")}),i("#"+n+"_district_field").removeAttr("title").removeClass("pok_loading").addClass("update_totals_on_change"),i("#"+n+"_district").prop("disabled",!1).trigger("chosen:updated").trigger("options_loaded",l);else if(i("#"+n+"_district_field").removeAttr("title").removeClass("pok_loading"),i("#"+n+"_district").prop("disabled",!1),confirm(t.labelFailedDistrict))return pok_load_district(n)}))}},pok_check_country("billing"),pok_check_country("shipping"),"yes"===t.loadReturningUserData&&pok_load_returning_user_data(),i("#billing_state").on("change",function(){pok_load_city("billing")}),i("#shipping_state").on("change",function(){pok_load_city("shipping")}),t.enableDistrict&&(i("#billing_city").on("change",function(){pok_load_district("billing")}),i("#shipping_city").on("change",function(){pok_load_district("shipping")}));var n=i(".woocommerce-billing-fields__field-wrapper, .woocommerce-shipping-fields__field-wrapper");n.each(function(t,n){var a=i(n).attr("class");i(n).removeClass(a).addClass(a+"-pok").find(".form-row").sort(function(t,n){var a=parseInt(i(t).attr("data-priority"))||parseInt(i(t).attr("data-sort")),e=parseInt(i(n).attr("data-priority"))||parseInt(i(n).attr("data-sort"));return e>a?-1:a>e?1:0}).appendTo(n)})}(jQuery);
